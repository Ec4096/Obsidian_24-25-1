**关系 chapter[4&5]**
# 关系-关系的定义
## 1. 关系-关系的相关定义
- 关系的定义
	关系的实质还是**集合**
	$R\subseteq A_1\times A_2 \times ... \times A_n$ 表示n元关系
		当$R\subseteq A$ 一元关系退化为一般的集合
- 平凡关系
	- $\emptyset$ 空关系
	- $R =  A_1\times A_2 \times ... \times A_n$  n元全域关系
- 二元关系
	- 表示方法
		- 集合表示法
			$<x,y> \in R$ 
		- 中缀表示法
			x R y
	- 定义域Domain与值域Range
		- 定义域Domain = { $x| \exists y(y\in B \land <x,y>\in R)$  } $\subseteq A$
		- 值域Range = { $y|\exists x(x\in A \land <x,y>\in R)$ }$\subseteq B$
# 关系-关系的表示方法
## 1. 关系-关系的表示方法
- 集合表示法
	B = { 1,2,4 }
	R = { $<x,y> | x,y \in B \land y能被整除(x|y)$ }
	 ={ <1,1>,<1,2>,<1,4>,<2,2>,<2,4>,<4,4> }
	- 恒等关系
		$I_A$ = { <x,x> | $x\in A$}
- 归纳定义法
	![[Pasted image 20241217211002.png]]
- 矩阵表示法
	![[Pasted image 20241217211206.png]]
- 关系图
	关系图**必须是**$A^{2}$ 上的关系,简称**A上的关系**
	A中的每个元素都是图的结点$a_i$
	$a_i \rightarrow a_j$ 表示 $a_i R  a_j$
	![[Pasted image 20241217211727.png]]

# 关系-关系的一般属性
## 1. 关系-关系的一般属性!!
设$R \subseteq A^2$ 
- 自反关系
	![[Pasted image 20241217211953.png]]
- 反自反关系
	![[Pasted image 20241217212045.png]]
- 对称关系
	要有就都有，要没有就都没有
	![[Pasted image 20241217212150.png]]
	
- 反对称关系
	不能同时有
	![[Pasted image 20241217212210.png]]
	
- 传递关系
	![[Pasted image 20241217212459.png]]
- Summary!!
	自反与反自反，对称与反对称**不矛盾**
	- 自反和反自反**不能同时满足**，但**可以同时不满足**(对角线上有0有1)
	- 对称与反对称**不能同时不满足**，但**可以同时满足**(对称位是0)
# 关系-等价关系和集合的划分
## 1. 关系-等价关系和集合的划分-等价关系
- 引入
	对于**命题公式集合P**上的逻辑恒等关系$\Leftrightarrow$
	$F\Leftrightarrow G$ 的含义是F和G具有相同的真值表
	每类实际上是P的子集合；
	每类中的每个公式的真值表相同，即类中的任何两个公式都有关系$\Leftrightarrow$
	不同的类之间是两两不相交；或者说如果相交就是同一个类；**商集**
	P中的每个元素一定在某个类中；
	分类将集合中的元素等同起来；即在关系下每类中所有元素的性态是一致的，应此可以用类中的任意一元素代表类的所有成员；**代表元**
	从而实现了对集合的抽象
- 等价关系
	设$R\subseteq A^2$ ,R是等价关系 iff
	$R是自反的\land 对称的 \land 传递的$!!Base
- 常用的恒等关系
	- 全域关系$A^2$
	- 恒等关系$I_A$
	- 逻辑恒等关系$\Leftrightarrow$
	- 集合相等关系
	- k同余关系(模k关系)mod k 
		设Z是整数集合,$k\in N$ , **k同余关系**$=_k$ 的定义如下
		$m =_k n$ iff $\exists i \in Z \land m - n = ki$
	- 等比关系
		设Z是整数集合,$Z\times (Z-{0})$ 上的**等比关系Q**定义如下:
		<a,b>Q<c,d>,iff, ad = bc
	- 极限相等关系
		![[Pasted image 20241217220333.png]]
		
## 2. 关系-等价关系和集合的划分-等价类!!
- **等价类$[a]_R$定义**
	![[Pasted image 20241218101039.png]]
	- 定理
		设R是A上的等价关系,那么下述三个条件等价
		![[Pasted image 20241218101702.png]]
	- 定理的含义
		等价类要么相等，要么不相交
		等价类的代表元是可以更换的,所以等价类与代表元无关
		同一等价类中的元素**两两都有关系**
		不相交的等价类中的元素**之间都没有关系**
- 划分$\pi$定义
	A是一集合,A的一个划分是一集簇(集合的集合)
	![[Pasted image 20241218102221.png]]
	并且满足下述两条件
	![[Pasted image 20241218102706.png]]
	- 由等价关系R诱导的划分
		R是A上的等价关系
		![[Pasted image 20241218105350.png]]
	- 划分的等价关系
		设$\pi$ 是集合A上的一个划分,A上的关系$R_{\pi}$ 定义如下
		![[Pasted image 20241218110435.png]]
		则：
			![[Pasted image 20241218110446.png]]
- 商集合
	设R是集合A上的等价关系,那么商集合为:
	![[Pasted image 20241218110749.png]]
	所以商集合的本质就是**由R诱导的划分**
	其中A/R的元素个数 即|A/R|被称为关系R的秩Rank

# 关系-偏序关系
## 1. 关系-偏序关系
- 偏序关系的定义
	R是集合A上的关系,R为偏序关系 iff,R满足以下三个条件
	$自反性\land 传递性 \land 反对称性$
	![[Pasted image 20241218155042.png]]
	偏序集合Poset中的元素仍然是A中的元素，但不是A中的任意两个元素都满足偏序关系？？
	偏序集合??
	PS:
		命题公式集合P上的永真蕴含关系$\Rightarrow$ 不是偏序关系
		因为没有反对称性
		$P1\Rightarrow P2 \land P2\Rightarrow P1$ 只能说明$P1\Leftrightarrow P2$ 不能说明$P1 = P2$
- 可比较的
	![[Pasted image 20241218155820.png]]
- 全序关系(线序关系)
	![[Pasted image 20241218155908.png]]
- Hass图
	- 在关系图的基础上
	1. 删除所有的自回路
	2. 删除所有三角型的最长边
	3. 有向边的起始点在下,终点在上,从而删除所有边的箭头
	- 偏序的Hass图
		- Example
			![[Pasted image 20241218164443.png]]
	- 全序(线序)的Hass图是一条直线
- 拟序关系
	![[Pasted image 20241218164658.png]]
	![[Pasted image 20241218164838.png]]
- 偏序和拟序的关系
	![[Pasted image 20241218165441.png]]
- 字典序关系
	![[Pasted image 20241218165919.png]]
	<是拟序,对应的偏序关系$\leq$ 称为字典序关系,字典序关系是线序关系
	Example
		![[Pasted image 20241218170227.png]]
		首先看其中一个是否为空串
		然后就从第一个元素开始**逐一**对比
		与长度关系不大(或者说条件苛刻 必须前面几个元素都相等)
- 最大(最小)元素&极大极小元素
	- 最大最小元素
		![[Pasted image 20241218170915.png]]
	- 极大极小元素
		![[Pasted image 20241218171127.png]]
	- Example
		![[Pasted image 20241218171240.png]]
	- 相关性质
		设$B\subseteq A$ 
		最大最小元素**唯一**，极大极小元素**不一定唯一**
		如果B有最大最小元素，那么也**一定是极大极小元素**
		如果B是有限集合,那么一定存在极大极小元素
- 临界元素
	![[Pasted image 20241218172334.png]]
	Example:
		![[Pasted image 20241218183310.png]]
		对于左侧图 b,i为B的上界 | k,l为B的下界
		其中b为lub，不存在glb
	- 相关性质
		最小上界lub和最大下界glb是唯一的(与最大最小元素相似,但是元素的范围不同)
		如果B有最大最小元素,那么该元素**一定**是lubORglb
	- Example
		![[Pasted image 20241218183915.png]]
- summary
	- 对于元素-界来说
		元素只能属于B，界可以属于A(包括B所不包含的内容)
	- 对于最和极来说
		最XX具有唯一性，极不具有唯一性
	- 如果存在最大最小元素
		那么该最大最小元素 == 极大极小元素 == lub OR glb
- 相容关系与拓扑排序
	dsla
- 良序关系
	![[Pasted image 20241218185908.png]]
	两个条件 1.线序(两两可比较), 2.每个非空子集合都存在最小元素

# 关系-例题总结
## 1. 例题总结1
- 题干
	设|A| = n,则A上的一元二元关系分别有多少?A上的不同的m元关系共有多少?
- 题解
	- |A| = n,那么A的一元关系其实就是在A中分别挑选0个,1个,...,n个元素作为关系集合的元素 所以共有$2^n$个
	- $|A^m| = n^m$ 那么
		![[Pasted image 20241218194127.png]]
		更正:"三元关系" 改为 "m元关系"
	- 另外一种解释:
		关系矩阵$M_R$中一共$n^m$个位置,位置取1或取0一共两种情况,所以一共$2^{n^{m}}$种关系

# 关系-关系的合成
## 关系-关系上的运算
- Base
	关系的本质就是集合,所以集合的运算适用于关系
	Example:
		![[Pasted image 20241218194748.png]]
- 合成的定义
	![[Pasted image 20241218195847.png]]
	对于$R_1 \subseteq A \times B$   A为关系$R_1$ 的前域,  B为关系$R_1$的陪域
	合成的条件:
		前一个关系的陪域与后一个关系的前域是相同的集合
- 合成的运算性质
	![[Pasted image 20241218200212.png]]
	结合律正常 | 无交换律 |
	对于分配率来说 $\cup$ 正常 | $\cap$ 为子集关系
- 关系的幂
	设R是A上的关系,$n\in N$ 则R的**幂乘**递归定义如下
	1. $R^0$ = $I_A$
	2. $R^{n+1}$ = $R^n R$
- 相关性质
	- $R^mR^n = R^{m+n}$
	- $(R^m)^n = R^{mn}$
- 关系的逆
	![[Pasted image 20241218205141.png]]
	R关系的逆就是将R的**前域和陪域互换**(矩阵的转置)
	如果R具有五性那么**R的逆**也**相应地具有五性**
	PS:
		关系的逆和关系的补是**不同的概念**
		关系的补类似于集合的补概念
		关系的补相当于将$M_R$上的0与1全部转为相反
		关系的补的概念如下:
		![[Pasted image 20241218205353.png]]
	- 相关性质
		- R是对称关系 iff, R = R的逆(~符号)
- 闭包
	- 在数学上 把**包含某个给定**的集合,并且具有**某个性质的最小集合**称为闭包
	- 特殊关系自反闭包r(R),对称闭包s(R),传递闭包t(R)
		R的闭包$R^{'}$ 应该满足以下要求
		![[Pasted image 20241219151458.png]]
	- 闭包的构造!!
		![[Pasted image 20241219152005.png]]
	- Example
		![[Pasted image 20241219152430.png]]
	- 有限集合的传递闭包t(R)
		![[Pasted image 20241219152914.png]]
		PS_Proof
			证明先设$<X_0,X_{n+1}> \in R^{n+1}$
			利用抽屉原理(这n+1个元素只能从n个中选择 所以必定有重复的即 i
			== j)
			所以这个序偶应该属于$R^{n + 1 -(j-i)}$ 进而是所证的右侧
	- 闭包之间的关系
		- 设R是自反关系,则s(R)和t(R)
		- rt(R) = tr(R)
			重点在于证明![[Pasted image 20241219155117.png]]
- Warshall算法
	- 引入
		![[Pasted image 20241219160926.png]]
		但是Warshall算法可以降为$O(n^3)$
	- Warshall算法定义
		![[Pasted image 20241219161026.png]]
		重点在于第二点的经过a1,a2,...,ak**不需要都**经过**但需要仅**经过
		- $W_k与W_{k+1}$ 的关系
			![[Pasted image 20241219161420.png]]
			就是在原有的基础上 加上 经过$a_{k+1}$可以把两条路径连起来

# 关系-例题总结
## 1. 例题总结1
- 结论
	![[Pasted image 20241219162031.png]]
## 2. 例题总结2
- 结论
	![[Pasted image 20241219162327.png]]
	即关系合成的逆，等于关系逆的合成(**注意顺序**)
## 3. 例题总结3
- 结论
	![[Pasted image 20241219163142.png]]
	![[Pasted image 20241219163151.png]]
	![[Pasted image 20241219163202.png]]
- 结论2
	![[Pasted image 20241219163417.png]]
	![[Pasted image 20241219163430.png]]
	对称闭包S同传递闭包T
## 4. 例题总结4
- 题干
	设A是有n个元素的有限集合,那么
	A上的最大的等价关系中有多少个元素?它的秩等于多少?
	A上的最小的等价关系中有多少个元素?它的秩等于多少?
- 题解
	首先这个秩是商群中的概念,是指等价类有多少
	那么等价类最多有n个,即每个元素只和自己本身等价
	最少有1个,即所有元素之间相互等价
	所以
	最大的等价关系中有$n^2$个元素,它的秩为1
	最小的等价关系中有n个元素,它的秩为n