***chapter6 <输入输出系统 >***
# 5.1 Basis
## 5.1.0 标准术语
- 带宽 Bandwidth
	传输数据的字节数/周期数

- 总线连接串口-键盘鼠标
- 总线连接设备接口-声卡|显卡|网卡
## temp1数据交换方式
- 总述
	与通道方式，外围处理机(有指令集支持)一同协作
	分为
	无条件传输 | 查询方式 | 中断方式 | DMA
- 无条件传送
	双方发送和接受数据都是无条件的
	任何时候想传就传，想收就收
	数据没有传输(接收)完毕的时候就继续传输(接收)
- 查询方式
	微型处理器(例如嵌入式)利用轮询读取**接口内部**的**状态位**(位于状态端口中) 
	用软件来查询
	握手协议类似于TCP协议
	双方利用控制联络信号实现同步也叫**握手**
	因此 联络信号也叫握手信号
	慢但是可靠 CPU效率低
- 中断方式
	由外设引起
	- 接口向CPU提出中断请求(INTR)
		$接口\rightarrow 控制总线 \rightarrow CPU$
	- 中断响应条件
		- 当前指令结束，为了保证异常程序正常返回
		- CPU开中断
	- 中断服务(处理)程序
		
	- 中断返回
	-
	- 补充
		- CSR(Control and Status Register)控制与状态寄存器
			特权指令(由操作系统| 在内核态下的程序执行的指令)
			由特权指令对控制状态寄存器进行**访问和操作**
			包括：
				OF ZF SF IF(中断允许位)
				以上各占一位bit
			
	- 对于单中断系统
		![[Pasted image 20241224175648.png]]
		一次处理一个中断
		其中
		INTR为中断请求信号线 其中包括中断向量号
		INTA是中断响应信号线 其中包括返回地址
		I/O设备会给接口传递位置信息
	- 多级中断<利用中断嵌套操作>
		在接口中，可以按优先级中断其中的程序(由软件实现)
- DMA方式
	中断程序虽然不需要CPU来查询条件,但是最终的数据传输还是要靠CPU执行的中断服务程序来完成
	硬盘主要使用这一种方式
	DMA全称Direct Memory Access 直接内存操作
	信息直接从外设直接到主存Memory不需要中转CPU
	即DMA控制器代替CPU来直接传输
	但不可以按照优先级进行嵌套中断程序(由硬件实现)
	上一章节所讲的缺页故障程序，是在初始化DMA控制器将总线的控制权抢到给DMA
	- DMA控制器与CPU共享总线的方式
		- CPU暂停方式-对于高速外设
			在CPU访问时，如果DMA要传递数据那么CPU暂停
			利用数据缓冲储存器做桥梁来实现I/O设备与主存之间的数据交换
		- 周期挪用方式-对于中速外设
			
